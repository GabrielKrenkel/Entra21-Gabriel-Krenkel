<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/5a1186bf2d.js" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>

    <style>

        .modal{
            background-color: rgba(0, 0, 0, 0.200);
            height: 100%;
            width: 100%;
            position: fixed;
            z-index: 3;
            top: 0;
            left: 0;
            overflow: auto;
            display: none;
        }

        #menssagem-modal {
            position: relative;
            display: flex;
            flex-direction: row;
            align-items: center;
            background-color: white;
            top: -105px;
            
        }
        #fechar-Modal{
            display: flex;
            position: relative;
            background-color: white;
            flex-direction: column;
            align-items: center;
            top: 30%;
            width: 25em;
            height: 23em;
            justify-content: space-evenly;
            left: 40%;
            border-radius: 0.20em;
        }
        #fechar-Modal span{
            
            text-align: center;
            position: relative;
            display: flex;
            left: 45%;
            top: -140px;
            
        }
        #fechar-Modal span p {
            margin: 15px;
        }

        .relogio{
            text-align: center;
            margin: 100px;
            left: 85%;
            height: 24rem;
            
        }
        #contador{
            
            font-size: 90px;
            font-family: Arial, Helvetica, sans-serif;
        }
        #cronometro{
            font-stretch: ultra-expanded;
            font-size: 23px;
            display: flex;
            font-family: Arial, Helvetica, sans-serif;
            flex-direction: column;
            align-items: center;
        }

        button{
            padding: 18px 65px;
            font-size: 20px;
        }
        h2 {
            position: relative;
            top: -120px;
            left: 15rem;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 40px;
        }
        .startstop{
            position: relative;
            display: none;
            flex-direction: row;
            justify-content: center;

        }
        .startstop button {
            margin-left: 30px;
        }
    </style>
    
    <div class="relogio">
        <br><br><br><br><br><br>
        <h1 id="contador">00:00:00<h2 id="ms">: 00</h2></h1>
    </div>

    <div id="cronometro">
        <label for="tempo">Digite o tempo necessario
            <input type="time" id="tempo">
        </label>
        <br><br>
        <button id="botao">Iniciar</button>
    </div>

    <div class="startstop">
        <div class="botoes">
            <button id="start">Start</button><button id="stop">Stop</button>
        </div>
    </div>

    <div class="modal">
        <div id="fechar-Modal">
            <br>
           <span><p>&#9747;</p></span>
            <div id="menssagem-modal">

                <h3>Tempo finalizado</h3>
                <br><br> <br>
            </div>

        </div>
            
    </div>
    <script>
        // 3) Faça uma cronômetro através da função criaCronometro(tempo, callback) que receba o valor inicial através de um <input type="time"> 
        // e dispare uma função callback quando o tempo acabar.

        let hora, minuto, segundo = 0, milisegundos = 0, tempo = document.querySelector("#tempo"), Iniciar = document.querySelector("#botao"), 
        mostrar = document.querySelector("#contador"), startstop = document.querySelector(".startstop"), start = document.querySelector("#start"), 
        stop = document.querySelector("#stop"), mostrarMilisegundo = document.querySelector("#ms"), apagar = document.querySelector("#cronometro"), parar

        function obtemTempo() {
            
            verificar = tempo.value.split(":")

            console.log(verificar)
            

            if (verificar.length > 1) {

                hora = Number(verificar[0])

                minuto = Number(verificar[1])

                if (hora < 10) {

                    hora = "0" + hora
                
                }

                if (minuto < 10) {

                    minuto = "0" + minuto
                
                }

            } else {

                    return alert("Valor Invalido!")
            }

            apagar.style.display = "none"

            startstop.style.display = "flex"
            
            mostrar.innerText = "" + hora + ":" + minuto + ":" + "00"
        }

        Iniciar.addEventListener("click", (event) => {
                    
            obtemTempo()

        })

        start.addEventListener("click", (event) => {
            
            parar = setInterval(cronometrar, 10)

            start.disabled = true
        })

        function cronometrar() {

            if (milisegundos == 0) {

                if (segundo == 0 && milisegundos == 0) {

                    segundo = 60

                    minuto --

                    if (minuto == 0 && segundo == 0 && milisegundos == 0) {
                        
                        hora --

                        if (hora == 0 && minuto == 0 && segundo == 0 && milisegundos == 0) {
                            
                        }
                    }
                
                }
                
                milisegundos = 100
                
                segundo --
            
            }
            
            milisegundos --
            
            if (segundo >= 10 && hora >= 10 && minuto >= 10) {

                mostrarMilisegundo.innerText = ": \t" + milisegundos 
                mostrar.innerText = hora + ":" + minuto + ":" + segundo

                return

            }

            if (segundo >= 10 && hora >= 10) {

                mostrarMilisegundo.innerText = ": \t" + milisegundos 
                mostrar.innerText = hora + ":" + "0" + minuto + ":" + segundo

                return
            }
            
            if (segundo >= 10 && minuto >= 10) {

                mostrarMilisegundo.innerText = ": \t" + milisegundos 
                mostrar.innerText = "0" + hora + ":" + minuto + ":" + segundo

                return

            }

            if (minuto >= 10 && hora >= 10) {

                mostrarMilisegundo.innerText = ": \t" + milisegundos 
                mostrar.innerText = hora + ":" + minuto + ":" + "0" + segundo

                return

            }
        }
    </script>
</body>
</html>